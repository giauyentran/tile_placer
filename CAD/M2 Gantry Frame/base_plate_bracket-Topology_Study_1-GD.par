DRIVER
  os.environ['SMA_TSO_COSMOS_ELEMAT'] = '1'
  driver.registerSaveRule( UpdateRules.COPY, CheckPoints.ITER_COMPLETE, EventTimes.LAST, [ '*.ste*' ], 'SAVE.ste', '' )
  driver.registerSaveRule( UpdateRules.COPY, CheckPoints.ITER_COMPLETE, EventTimes.LAST, [ '*.lcd*' ], 'SAVE.ste', '' )
  driver.registerSaveRule( UpdateRules.COPY, CheckPoints.ITER_COMPLETE, EventTimes.LAST, [ '*.lcm*' ], 'SAVE.ste', '' )
END_

FEM_INPUT
  ID_NAME = base_plate_bracket-Topology_Study_1_1
  FILE = base_plate_bracket-Topology Study 1.NOD
END_

*SET_DB,rint,130,1

GROUP_DEF
  ID_NAME = FROZEN_AREA_ELEMS_GRP_1
  TYPE=ELEM
  FORMAT=LIST
  LIST_BEGIN
479,553,1357,2505,3065,4203,4657,4780,5413,5642,6382,6400,6401,6430,6552,6557,6580,6724,6807,
6836,6852,6893,7163,7212,7274,7386,7391,7405,7423,7454,7518,8252,8273,8276,8294,8307,8320,
8335,8521,8525,8575,8579,8627,8635,8681,8702,8785,8830,8884,8930,8954,8962,8971,8975,8984,
8993,9310,9325,9328,9329,9330,9343,9345,9353,9388,9389,9395,9653,9673,9714,9789,9843,9893,
10035,10188,10210,10215,10250,10275,10482,10545,10658,10662,10681,10734,10746,10925,10941,
10983,10986,10994,11009,11381,11382,11500,11719,11733,11820,11821,11835,11869,11881,11978,
12016,12021,12215,12254,12282,12462,12492,12533,12534,12540,12543,12675,12680,12689,12693,
12696,12702,12829,12849,12927,12941,13036,13108,13138,13277,13339,13371,13521,13522,13554,
13576,13592,13697,13698,13728,13730,13898,13932,14312,14510,14527,14539,14774,14782,14784,
14789,14798,14819,14842,14853,14860,14867,14874,14877,14891,14892,14904,14911,14912,14914,
14936,14954,14956,14959,14960,14969,14974,14975,14976,14984,14992,14993,15005,15009,15025,
15036,15041,15046,15054,15057,15061,15065,15080,15083,15085,15096,15102,15106,15108,15115,
15119,15121,15130,15134,15143,15144,15147,15155,15159,15164,15166,15178,15180,15182,15204,
15211,15212,15213,15214,15219,15225,15230,15240,15245,15252,15266,15268,15270,15271,15275,
15283,15284,15291,15293,15295,15298,15307,15309,15312,15314,15320,15321,15328,15335,15342,
15349,15351,15354,15355,15356,15385,15386,15393,15427,15744,15749,15758,15814,15819,15832,
15835,15846,15890,15897,15914,15920,15921,15923,15925,16008,16072,16075,16134,16136,16141,
16143,16145,16151,16152,16153,16158,16174,16185,16295,16317,16320,16321,16334,16348,16384,
16393,16412,16455,16486,16487,16521,16524,16535,16536,16537,16545,16547,16549,16583,16593,
16608,16610,16660,16662,16678,16686,16695,16696,16718,16719,16725,16731,16846,16850,16853,
16856,16858,16869,16876,16883,16899,16901,16934,16935,16936,16974,16981,16982,16994,17001,
17039,17044,17045,17047,17052,17061,17062,17066,17085,17086,17089,17090,17092,17093,17110,
17118,17124,17159,17170,17174,17176,17222,17245,17247,17248,17257,17260,17284,17311,17325,
17341,17422,17436,17439,17442,17443,17487,17489,17499,17500,17510,17511,17521,17533,17553,
17558,17579,17673,17688,17693,17699,17742,17745,17750,17767,17773,17783,17795,17842,17843,
17846,17853,17857,17858,17882,17920,17941,17944,17969,17971,18013,18014,18018,18019,18022,
18023,18024,18083,18086,18088,18098,18101,18110,18116,18126,18208,18217,18228,18232,18234,
18329,18335,18338,18341,18348,18386,18395,18399,18408,18431,18437,18445,18447,18449,18450,
18452,18457,18461,18462,18505,18509,18515,18520,18525,18526,18540,18542,18614,18623,18628,
18644,18649,18657,18660,18667,18709,18717,18719,18733,18741,18757,18767,18771,18786,18839,
18841,18844,18847,18852,18868,18871,18873,18892,18911,18912,18919,18926,18946,18997,19043,
19044,19053,19059,19082,19128,19147,19236,19237,19244,19245,19261,19266,19269,19270,19278,
19285,19310,19333,19374,19380,19408,19532,19534,19796,19799,19801,19806,19808,19819,19828,
20526,20529,20534,20591,20593,20631,20763,20764,20993,20997,21086,21220,21432,21439,21465,
21533,21536,21589,21729,21900,21906,21983,22052,22057,22060,22216,22268,24960,25609,26068,
26275,26412,26462,26547,26611,27096,27113,27137,27221,27223,27382,27414,27463,27525,27584,
28622,28624,29312,29361,29362,29381,29383,29387,29405,29724,29727,29972,29973,29981,30023,
30436,30585,30643,30753,30754,30837,30979,31156,31256,31674,32281,32285,32446,32583,32598,
32807,32908,33255,33393,33480,33539,33608,33969,34156,34157,34210,34212,34295,34310,34422,
34426,34464,34768,34782,34831,34910,35608,35666,35668,35988,36001,36204,36486,36829,36847,
37624,37642,37659,38257,40270,40654,40861,41201,41322,41640,42117,42119,42290,44315,44511,
44524,44655,44658,45039,47720,48389,48592,48948,49429,49586,49587,49647,50638,50862,51501,
51503,51772,52305,52383,52559,52677,52794,52918,53147,53158,53710,53836,54616,54619,55737,
55740,55957,57775,58093,58163,58164,58174,58379,65944,66276,66720,69109,69311,75861
END_

! ----------------------------------------------------------------
!
! Design Response: Stiffness_Measure
!
DRESP
  ID_NAME = Stiffness_Measure
  LIST = NO_LIST
  DEF_TYPE = SYSTEM
  EL_GROUP = ALL_ELEMENTS
  TYPE = ENERGY_STIFF_MEASURE
  GROUP_OPER = SUM
  LC_SEL = SUM 
  LC_SET = STATIC, ALL, ALL, MAX
END_

! ----------------------------------------------------------------
!
! Design Response: Mass_DResp_1
!
DRESP
  ID_NAME = Mass_DResp_1
  LIST = NO_LIST
  DEF_TYPE = SYSTEM
  EL_GROUP = ALL_ELEMENTS
  TYPE = WEIGHT
  GROUP_OPER = SUM
END_

! ----------------------------------------------------------------
!
!
! Design Area: Task1_DESIGN_AREA
!
DV_TOPO
  ID_NAME = Task1_DESIGN_AREA
  EL_GROUP = ALL_ELEMENTS
END_

! ----------------------------------------------------------------
!
! Objective Function: StiffnessEnergy_Obj_Func
!
OBJ_FUNC
  ID_NAME = StiffnessEnergy_Obj_Func
  DRESP = Stiffness_Measure, 1.0
  TARGET = MIN
END_

! ----------------------------------------------------------------
!
! Constraint: Mass_Constraint_1
!
CONSTRAINT
  ID_NAME = Mass_Constraint_1
  DRESP = Mass_DResp_1
  MAGNITUDE = REL
  LE_VALUE = 0.5
END_

! ----------------------------------------------------------------
!
! Geometric Restriction: Symm_ManufacConstraint_2-1
!
LINK_TOPO
  ID_NAME = Symm_ManufacConstraint_2-1_LINK_
  TYPE = PLANE_SYM, AXIS_3
  CS = CS_0 
  IGNORE_FROZEN = FALSE
END_

DVCON_TOPO
  ID_NAME = Symm_ManufacConstraint_2-1
  EL_GROUP = ALL_ELEMENTS
  CHECK_TYPE = LINK_TOPO
  CHECK_LINK = Symm_ManufacConstraint_2-1_LINK_
END_

! ----------------------------------------------------------------
!
! Geometric Restriction: Frozen_ManufacConstraint_3
!
DVCON_TOPO
  ID_NAME = Frozen_ManufacConstraint_3
  EL_GROUP = FROZEN_AREA_ELEMS_GRP_1
  CHECK_TYPE = FROZEN
END_

! ----------------------------------------------------------------
!
!
! Optimize: OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_CONTROLLER 
!
OPTIMIZE
  ID_NAME = OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_SENSITIVITY
  DV = Task1_DESIGN_AREA
  OBJ_FUNC = StiffnessEnergy_Obj_Func
  DVCON = Symm_ManufacConstraint_2-1
  DVCON = Frozen_ManufacConstraint_3
  CONSTRAINT = Mass_Constraint_1
  STRATEGY = TOPO_SENSITIVITY
END_

OPT_PARAM
  ID_NAME = OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_SENSITIVITY_OPT_PARAM_
  OPTIMIZE = OPTIMIZE_1_TOPOLOGY_OPTIMIZATION_SENSITIVITY
  DV_UPDATE_STRATEGY = CSA
  STABILIZATION = YES
  AUTO_FROZEN = BOTH
  AUTO_FROZEN_CON = BOTH
  STOP_CRITERION_LEVEL = BOTH
  STOP_CRITERION_OBJ = 0.001
  STOP_CRITERION_DENSITY = 0.005
END_

STOP
  ID_NAME = Task-1_GLOBAL_STOP_CONDITION_
  ITER_MAX = 75
END_

